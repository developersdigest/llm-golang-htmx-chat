<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with AI</title>
    <!-- 1. Loading external libraries -->
    <!-- htmx for AJAX and WebSocket functionality -->
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
    <!-- htmx WebSocket extension -->
    <script src="https://unpkg.com/htmx.org/dist/ext/ws.js"></script>
    <!-- marked for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- highlight.js for code syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">
    <!-- 2. Main container with htmx WebSocket connection -->
        <!-- 3. Chat messages container -->
        <!-- 4. Message input form with htmx WebSocket send attribute -->
    <script>
        // 5. Variables to track current AI message
        // 6. Configure marked library for Markdown parsing
        // 7. Function to render Markdown content
        // 8. htmx WebSocket message handler
            // 9. Handle new AI message
                    // Render the previous message
                // Remove "AI: " prefix and start new content
                // Append to existing AI message content
            // 10. Render the current state of the message
            // 11. Scroll chat to bottom
        // 12. Form submission handler
            // Reset AI message tracking
    </script>
</body>

</html>